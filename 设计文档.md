# 专注学习提醒器 (FocusStudyReminder) 设计文档

## 项目概述
专注学习提醒器是一个辅助用户进行高效学习的Windows桌面应用程序。它通过定时提醒功能，帮助用户在长时间学习过程中保护视力，并保持专注力。

## 核心功能
1. **学习-休息循环**: 每90分钟学习后提醒用户休息20分钟
2. **随机倒计时**: 在学习时间内，进行随机时间的倒计时
3. **冥想提醒**: 每次小倒计时结束后，提醒用户闭眼冥想20秒
4. **音效提示**: 倒计时结束时播放提示音效
5. **可自定义设置**: 允许用户自定义各种参数和音效

## 界面设计
界面将采用简洁的设计风格，主要包括以下元素：
- 主倒计时显示区域（显示当前学习时段/休息时段剩余时间）
- 小倒计时显示区域（显示下次冥想提醒的剩余时间）
- 状态指示器（当前处于学习模式/休息模式/冥想模式）
- 设置按钮（打开设置面板）
- 开始/暂停按钮
- 重置按钮

## 系统架构
系统将采用简单的分层架构：
1. **UI层**: Windows Forms界面
2. **业务逻辑层**: 倒计时管理、状态转换逻辑
3. **配置管理层**: 用户设置的保存和加载
4. **音效服务**: 音频播放和管理

## 类设计

### 1. 主窗体类 (MainForm)
负责界面显示和用户交互

### 2. 设置窗体类 (SettingsForm)
负责显示和修改用户设置

### 3. 计时器管理类 (TimerManager)
负责管理各种倒计时逻辑：
- 大循环计时器（控制学习-休息循环）
- 小循环计时器（控制随机倒计时和冥想提醒）

### 4. 设置管理类 (SettingsManager)
负责保存和加载用户设置：
- 学习时长（默认90分钟）
- 休息时长（默认20分钟）
- 随机倒计时范围（默认3-5分钟）
- 冥想时长（默认20秒）
- 音效设置

### 5. 音效管理类 (SoundManager)
负责音效的加载和播放

## 实现流程

### 第一阶段：基础UI设计
1. 设计并实现主窗体界面
2. 设计并实现设置窗体界面
3. 实现两个窗体的交互逻辑

### 第二阶段：核心功能实现
1. 实现计时器管理类
2. 实现设置管理类
3. 实现音效管理类
4. 将以上类与UI层对接

### 第三阶段：功能优化和测试
1. 添加系统托盘功能
2. 实现开机自启动选项
3. 添加键盘快捷键
4. 完善异常处理
5. 进行功能测试和用户体验优化

## 具体功能实现细节

### 随机倒计时实现
1. 在学习阶段开始时，生成一个指定范围内的随机时间（如3-5分钟）
2. 启动倒计时计时器
3. 倒计时结束时，提示用户开始冥想并播放提示音
4. 冥想结束后，重新生成随机时间并重启倒计时

### 音效提示实现
1. 使用.NET的System.Media.SoundPlayer类加载和播放WAV格式音效
2. 提供默认音效文件
3. 允许用户选择自定义音效文件

### 设置保存实现
1. 使用.NET的配置文件系统保存用户设置
2. 应用启动时加载上次的设置
3. 用户修改设置后实时保存

## 未来可能的扩展功能
1. 统计分析功能：记录用户的学习和休息数据，生成专注度报告
2. 多种提醒模式：除了音效外，增加桌面通知、全屏提醒等模式
3. 任务管理功能：让用户可以为每个学习周期设定任务目标
4. 多平台支持：考虑使用.NET MAUI开发跨平台版本

## 开源计划
本项目计划在GitHub上开源，采用MIT许可证。这将允许其他开发者贡献代码或根据自己的需求修改程序。 